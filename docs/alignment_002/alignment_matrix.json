[
  {
    "id": "P1.DATA.MODEL.001",
    "phase": "P1",
    "area": "DATA",
    "type": "model",
    "plan_source": "Updated_Project_Plan_2.txt::1.1 Data models",
    "expected": "SQLAlchemy Blueprint with project/document FKs, status/version, primary/parent/replaced relationships, plan_nodes relationship, timestamps.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P1.DATA.MODEL.002",
    "phase": "P1",
    "area": "DATA",
    "type": "model",
    "plan_source": "Updated_Project_Plan_2.txt::1.1 Data models",
    "expected": "PlanNode with blueprint FK, parent, kind/title/summary, doc anchors and offsets, order_index, status/priority/estimate/risk, extra_metadata, linked_task_id and indexes.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P1.DATA.MODEL.003",
    "phase": "P1",
    "area": "DATA",
    "type": "model",
    "plan_source": "Updated_Project_Plan_2.txt::1.1 Data models",
    "expected": "Join table linking PlanNodes to Tasks with weight to support 1-N relationships.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P1.DATA.MODEL.004",
    "phase": "P1",
    "area": "DATA",
    "type": "model",
    "plan_source": "Updated_Project_Plan_2.txt::1.1 Data models",
    "expected": "TaskDependency with task_id and depends_on_task_id plus index for dependency graph.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P1.DATA.MODEL.005",
    "phase": "P1",
    "area": "DATA",
    "type": "model",
    "plan_source": "Updated_Project_Plan_2.txt::1.1 Data models",
    "expected": "Tracks ingestion progress for blueprint plan generation with status, counts, error_message, timestamps.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P1.DATA.MODEL.006",
    "phase": "P1",
    "area": "DATA",
    "type": "model",
    "plan_source": "Updated_Project_Plan_2.txt::1.1 Data models",
    "expected": "Project gains active_blueprint_id FK to selected blueprint.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P1.API.ENDPOINT.001",
    "phase": "P1",
    "area": "API",
    "type": "endpoint",
    "plan_source": "Updated_Project_Plan_2.txt::1.2 Blueprint & plan endpoints",
    "expected": "Create blueprint from document with optional base_blueprint_id and mark_active flag; versioning semantics.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P1.API.ENDPOINT.002",
    "phase": "P1",
    "area": "API",
    "type": "endpoint",
    "plan_source": "Updated_Project_Plan_2.txt::1.2 Blueprint & plan endpoints",
    "expected": "List blueprints for project including is_primary flag.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P1.API.ENDPOINT.003",
    "phase": "P1",
    "area": "API",
    "type": "endpoint",
    "plan_source": "Updated_Project_Plan_2.txt::1.2 Blueprint & plan endpoints",
    "expected": "Return blueprint metadata, plan tree, and ingestion job.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P1.API.ENDPOINT.004",
    "phase": "P1",
    "area": "API",
    "type": "endpoint",
    "plan_source": "Updated_Project_Plan_2.txt::1.2 Blueprint & plan endpoints",
    "expected": "Update blueprint title/description/status and optionally mark_active.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P1.API.ENDPOINT.005",
    "phase": "P1",
    "area": "API",
    "type": "endpoint",
    "plan_source": "Updated_Project_Plan_2.txt::1.2 Blueprint & plan endpoints",
    "expected": "Update PlanNode fields such as title, summary, kind, status, priority, order_index, estimate_points, risk_level, extra_metadata.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P1.API.ENDPOINT.006",
    "phase": "P1",
    "area": "API",
    "type": "endpoint",
    "plan_source": "Updated_Project_Plan_2.txt::1.2 Blueprint & plan endpoints",
    "expected": "Generate or regenerate PlanNode tree from blueprint document, optionally track BlueprintIngestionJob.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P1.API.ENDPOINT.007",
    "phase": "P1",
    "area": "API",
    "type": "endpoint",
    "plan_source": "Updated_Project_Plan_2.txt::1.4 PlanNode \u2192 Tasks",
    "expected": "Generate tasks for a PlanNode using LLM and link via PlanNodeTaskLink.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P1.API.ENDPOINT.008",
    "phase": "P1",
    "area": "API",
    "type": "endpoint",
    "plan_source": "Updated_Project_Plan_2.txt::1.4 PlanNode \u2192 Tasks",
    "expected": "Generate tasks for all feature/story nodes in a blueprint (heavy option).",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P1.API.ENDPOINT.009",
    "phase": "P1",
    "area": "API",
    "type": "endpoint",
    "plan_source": "Updated_Project_Plan_2.txt::1.2 Blueprint & plan endpoints",
    "expected": "Compare blueprint to its parent and mark changed nodes in metadata.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P1.SERVICE.BLUEPRINT.001",
    "phase": "P1",
    "area": "SERVICE",
    "type": "service",
    "plan_source": "Updated_Project_Plan_2.txt::1.3 Ingestion pipeline",
    "expected": "services/blueprints.py chunk\u2192outline\u2192merge flow to create PlanNodes with offsets, anchors, order_index, error handling.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P1.SERVICE.BLUEPRINT.002",
    "phase": "P1",
    "area": "SERVICE",
    "type": "service",
    "plan_source": "Updated_Project_Plan_2.txt::1.4 PlanNode \u2192 Tasks",
    "expected": "generate_tasks_for_plan_node creates tasks with metadata, links, dependencies from LLM output.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P1.UI.PLAN.001",
    "phase": "P1",
    "area": "UI",
    "type": "ui",
    "plan_source": "Updated_Project_Plan_2.txt::1.5 Frontend \u2013 Blueprint & Plan view",
    "expected": "Tasks tab shows blueprint selector and nested Plan tree with status/priority chips and doc snippets.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P1.UI.PLAN.002",
    "phase": "P1",
    "area": "UI",
    "type": "ui",
    "plan_source": "Updated_Project_Plan_2.txt::1.5 Frontend \u2013 Blueprint & Plan view",
    "expected": "UI actions to trigger POST /plan_nodes/{id}/generate_tasks and set active phase on phase nodes.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P2.DATA.MODEL.001",
    "phase": "P2",
    "area": "DATA",
    "type": "model",
    "plan_source": "Updated_Project_Plan_2.txt::2.1 Conversation summaries",
    "expected": "conversation_summaries table with conversation_id unique FK, short_summary, detail_summary, last_message_id, updated_at.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P2.DATA.MODEL.002",
    "phase": "P2",
    "area": "DATA",
    "type": "model",
    "plan_source": "Updated_Project_Plan_2.txt::2.2 ProjectSnapshot",
    "expected": "project_snapshots table with project_id unique FK, summary_text, active_phase_node_id, key_metrics_json, updated_at.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P2.SERVICE.CONVO.001",
    "phase": "P2",
    "area": "SERVICE",
    "type": "service",
    "plan_source": "Updated_Project_Plan_2.txt::2.1 Conversation summaries",
    "expected": "update_conversation_summary that rolls summaries after N messages using fast/deep model.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P2.SERVICE.SNAPSHOT.001",
    "phase": "P2",
    "area": "SERVICE",
    "type": "service",
    "plan_source": "Updated_Project_Plan_2.txt::2.2 ProjectSnapshot",
    "expected": "refresh_project_snapshot builds summary doc + ProjectSnapshot and exposes POST /projects/{id}/snapshot/refresh.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P2.SERVICE.CONTEXT.001",
    "phase": "P2",
    "area": "SERVICE",
    "type": "service",
    "plan_source": "Updated_Project_Plan_2.txt::2.3 ContextBuilder",
    "expected": "context_builder.py with dataclasses (PlanNodeContext, TaskContext, etc.) selecting plan/tasks/decisions/memory for chat.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P2.SERVICE.ALIGN.001",
    "phase": "P2",
    "area": "SERVICE",
    "type": "service",
    "plan_source": "Updated_Project_Plan_2.txt::2.4 Alignment helper",
    "expected": "services/alignment.py to score file edits/terminal commands with snapshot/plan/decisions context and return alignment JSON.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P2.UI.SNAPSHOT.001",
    "phase": "P2",
    "area": "UI",
    "type": "ui",
    "plan_source": "Updated_Project_Plan_2.txt::2.2 ProjectSnapshot Frontend",
    "expected": "Docs tab pins snapshot doc; Notes tab shows snapshot card with status/metrics.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P3.DATA.MODEL.001",
    "phase": "P3",
    "area": "DATA",
    "type": "model",
    "plan_source": "Updated_Project_Plan_2_Phase3_4.txt::3.1 Backend models for runs",
    "expected": "execution_runs with project/task/conversation FKs, run_type, status, started_by, meta, touched_files_json, timestamps, indexes.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P3.DATA.MODEL.002",
    "phase": "P3",
    "area": "DATA",
    "type": "model",
    "plan_source": "Updated_Project_Plan_2_Phase3_4.txt::3.1 Backend models for runs",
    "expected": "execution_steps with run FK, order_index, actor, tool, input/output payloads, status, rollback_data, timestamps, index.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P3.API.ENDPOINT.001",
    "phase": "P3",
    "area": "API",
    "type": "endpoint",
    "plan_source": "Updated_Project_Plan_2_Phase3_4.txt::3.4 Endpoints",
    "expected": "Create ExecutionRun with validation of project/task and status planned.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P3.API.ENDPOINT.002",
    "phase": "P3",
    "area": "API",
    "type": "endpoint",
    "plan_source": "Updated_Project_Plan_2_Phase3_4.txt::3.4 Endpoints",
    "expected": "List runs for project with optional status filter (open/all).",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P3.API.ENDPOINT.003",
    "phase": "P3",
    "area": "API",
    "type": "endpoint",
    "plan_source": "Updated_Project_Plan_2_Phase3_4.txt::3.4 Endpoints",
    "expected": "Fetch run with ordered steps.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P3.API.ENDPOINT.004",
    "phase": "P3",
    "area": "API",
    "type": "endpoint",
    "plan_source": "Updated_Project_Plan_2_Phase3_4.txt::3.4 Endpoints",
    "expected": "Advance run with approval=approve|skip|abort and execute next step via worker wrappers.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P3.API.ENDPOINT.005",
    "phase": "P3",
    "area": "API",
    "type": "endpoint",
    "plan_source": "Updated_Project_Plan_2_Phase3_4.txt::3.4 Endpoints",
    "expected": "Rollback touched files using rollback_data and mark run aborted.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P3.SERVICE.RUNS.001",
    "phase": "P3",
    "area": "SERVICE",
    "type": "service",
    "plan_source": "Updated_Project_Plan_2_Phase3_4.txt::3.2 Backend run orchestration",
    "expected": "services/runs.py with create_run, append_step, get_next_pending_step, mark_step_status, mark_run_status, rollback_run.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P3.LLM.TOOLS.001",
    "phase": "P3",
    "area": "LLM",
    "type": "service",
    "plan_source": "Updated_Project_Plan_2_Phase3_4.txt::3.3 LLM tool-calling",
    "expected": "openai_client tool definitions for read_file/write_file/run_terminal/search_docs/search_messages and run_agent_with_tools mapping tool calls to ExecutionSteps.",
    "observed": "LLM file tool routes differ: backend exposes /projects/{id}/fs/read and /fs/write; plan expects /projects/{id}/files/content and /files/apply_edit with matching semantics. No alias routes found.",
    "status": "Misaligned",
    "impact": "Agent tool routing mismatch; workers cannot call planned endpoints",
    "priority": "P1",
    "evidence_path": "backend/app/api/main.py",
    "evidence_lines": "3313-3405",
    "evidence_excerpt": "@app.get(\"/projects/{project_id}/fs/read\")\ndef read_project_file(\n    project_id: int,\n    file_path: Optional[str] = None,\n    subpath: Optional[str] = None,\n    db: Session = Depends(get_db),\n):\n    \"\"\"\n    Read a text file under the project's local_root_path.\n    \"\"\"\n    project = _ensure_project(db, project_id)\n    root = _get_project_root(project)\n    effective_path = file_path or subpath\n    if not effective_path:\n        raise HTTPException(\n            status_code=422,\n            detail=\"file_path (or subpath) is required.\",\n        )\n\n    target = _safe_join(root, effective_path)",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P3.SERVICE.WORKER.001",
    "phase": "P3",
    "area": "SERVICE",
    "type": "service",
    "plan_source": "Updated_Project_Plan_2_Phase3_4.txt::3.3 Worker roles module",
    "expected": "services/workers.py with run_code_worker/test_worker/doc_worker using role-specific prompts and allowed tools.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P3.SAFETY.DIFF.001",
    "phase": "P3",
    "area": "SAFETY",
    "type": "safety",
    "plan_source": "Updated_Project_Plan_2_Phase3_4.txt::3.5 Diffs & rollback details",
    "expected": "Before write_file capture original content/diff into ExecutionStep.output_payload and touched_files_json with rollback_data.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P3.SAFETY.TERM.001",
    "phase": "P3",
    "area": "SAFETY",
    "type": "safety",
    "plan_source": "Updated_Project_Plan_2_Phase3_4.txt::3.6 Command safety allowlist",
    "expected": "SAFE_COMMAND_PREFIXES and FORBIDDEN_SUBSTRINGS enforced for run_terminal steps, gating approvals in semi/full auto.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P3.UI.RUNS.001",
    "phase": "P3",
    "area": "UI",
    "type": "ui",
    "plan_source": "Updated_Project_Plan_2_Phase3_4.txt::3.6 Frontend: Runs panel & step UI",
    "expected": "Runs tab/panel listing runs and steps with status, alignment badge, approvals (approve/skip/abort) and diff viewer.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P4.DATA.MODEL.001",
    "phase": "P4",
    "area": "DATA",
    "type": "model",
    "plan_source": "Updated_Project_Plan_2.txt::3.1 Models (Phase 3/4 carry-over) and 4.1 Project autonomy settings",
    "expected": "Project fields: autonomy_mode, active_phase_node_id, autopilot_paused, max_parallel_runs.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P4.SERVICE.INTENT.001",
    "phase": "P4",
    "area": "SERVICE",
    "type": "service",
    "plan_source": "Updated_Project_Plan_2.txt::4.2 Intent classifier",
    "expected": "intent_classifier.py classify_intent using model alias intent; integrated in chat endpoint before Manager handling.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P4.SERVICE.MANAGER.001",
    "phase": "P4",
    "area": "SERVICE",
    "type": "service",
    "plan_source": "Updated_Project_Plan_2.txt::4.3 ManagerAgent",
    "expected": "ManagerAgent class handling start/continue runs, choose tasks, advance runs, explain_plan with heuristics and safety/autonomy rules.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P4.API.ENDPOINT.001",
    "phase": "P4",
    "area": "API",
    "type": "endpoint",
    "plan_source": "Updated_Project_Plan_2.txt::4.4 Autopilot tick endpoint",
    "expected": "Autopilot heartbeat endpoint that is idempotent and safe; uses ManagerAgent to start/advance runs or return waiting status.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P4.API.ENDPOINT.002",
    "phase": "P4",
    "area": "API",
    "type": "endpoint",
    "plan_source": "Updated_Project_Plan_2.txt::4.3 Manager explain_plan",
    "expected": "Explain current plan/next tasks/runs for UI consumption.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P4.UI.AUTOPILOT.001",
    "phase": "P4",
    "area": "UI",
    "type": "ui",
    "plan_source": "Updated_Project_Plan_2.txt::4.5 Frontend heartbeat & controls",
    "expected": "UI dropdown for autonomy mode, pause/resume, status pill, heartbeat polling every 30\u201360s calling /autopilot_tick, with toasts/badges.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P4.LEARN.MODEL.001",
    "phase": "P4",
    "area": "LEARN",
    "type": "model",
    "plan_source": "Updated_Project_Plan_2_AUTOPILOT_LEARNING.txt::1.1 Task learning fields",
    "expected": "Task fields: difficulty_score, rework_count, planned_phase_node_id, actual_phase_node_id, actual_started_at/completed_at.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P4.LEARN.MODEL.002",
    "phase": "P4",
    "area": "LEARN",
    "type": "model",
    "plan_source": "Updated_Project_Plan_2_AUTOPILOT_LEARNING.txt::1.2 PlanNode learning fields",
    "expected": "PlanNode learned_priority, learned_risk_level, inferred_dependency_json.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P4.LEARN.MODEL.003",
    "phase": "P4",
    "area": "LEARN",
    "type": "model",
    "plan_source": "Updated_Project_Plan_2_AUTOPILOT_LEARNING.txt::1.3 ExecutionRun learning fields",
    "expected": "ExecutionRun outcome and learning_notes fields populated after runs.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P4.LEARN.SERVICE.001",
    "phase": "P4",
    "area": "LEARN",
    "type": "service",
    "plan_source": "Updated_Project_Plan_2_AUTOPILOT_LEARNING.txt::2.1 Blueprint Understanding Pipeline",
    "expected": "services/blueprint_understanding.py producing architecture/foundations/sequence docs and annotating PlanNodes with learned fields.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P4.LEARN.SERVICE.002",
    "phase": "P4",
    "area": "LEARN",
    "type": "service",
    "plan_source": "Updated_Project_Plan_2_AUTOPILOT_LEARNING.txt::3 Run-Time Learning & 3.2 Periodic retrospectives",
    "expected": "ManagerAgent.record_run_outcome and periodic_retrospective/refine_plan methods updating learned fields and tasks.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P4.LEARN.API.001",
    "phase": "P4",
    "area": "LEARN",
    "type": "endpoint",
    "plan_source": "Updated_Project_Plan_2_AUTOPILOT_LEARNING.txt::4.1 API: refine_plan",
    "expected": "Endpoint invoking ManagerAgent.refine_plan to adjust ordering/priorities using learning signals.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P4.LEARN.API.002",
    "phase": "P4",
    "area": "LEARN",
    "type": "endpoint",
    "plan_source": "Updated_Project_Plan_2_AUTOPILOT_LEARNING.txt::5.1 Backend metrics endpoint",
    "expected": "Endpoint returning learning metrics (cycle time, difficulty, fragile areas, plan deviation, blocked tasks).",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "P4.LEARN.UI.001",
    "phase": "P4",
    "area": "LEARN",
    "type": "ui",
    "plan_source": "Updated_Project_Plan_2_AUTOPILOT_LEARNING.txt::5.3 Frontend surfaces",
    "expected": "UI card showing learning_metrics and button to call refine_plan.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "PT.INGEST.EMBED.001",
    "phase": "PT",
    "area": "INGEST",
    "type": "service",
    "plan_source": "Updated_Project_Plan_2_Ingestion_Plan.txt::T1.1 Centralized batched embeddings helper",
    "expected": "Centralized embeddings batching respecting MAX_EMBED_TOKENS_PER_BATCH and MAX_EMBED_ITEMS_PER_BATCH using embed_batch wrapper.",
    "observed": "embed_texts_batched implements batching with token/item caps and env overrides for embedding model.",
    "status": "Correct",
    "impact": "Supports Phase T ingestion batching",
    "priority": "P2",
    "evidence_path": "backend/app/llm/embeddings.py",
    "evidence_lines": "92-165",
    "evidence_excerpt": "def embed_texts_batched(\n    texts: List[str],\n    *,\n    max_tokens_per_batch: Optional[int] = None,\n    max_items_per_batch: Optional[int] = None,\n    model: Optional[str] = None,\n) -> List[List[float]]:\n    \"\"\"\n    Embed a list of texts by splitting them into smaller batches that satisfy\n    both token-count and item-count limits. This prevents gigantic ingestion\n    jobs from exceeding OpenAI's per-request caps.\n    \"\"\"\n    if not texts:\n        return []\n\n    tokens_cap = max_tokens_per_batch or _resolve_batch_limit(\n        \"MAX_EMBED_TOKENS_PER_BATCH\", _DEFAULT_MAX_TOKENS_PER_BATCH\n    )\n    items_cap = max_items_per_batch or _resolve_batch_limit(\n        \"MAX_EMBED_ITEMS_PER_BATCH\", _DEFAULT_MAX_ITEMS_PER_BATCH",
    "followup": ""
  },
  {
    "id": "PT.INGEST.MODEL.001",
    "phase": "PT",
    "area": "INGEST",
    "type": "model",
    "plan_source": "Updated_Project_Plan_2_Ingestion_Plan.txt::T1.2 IngestionJob model for resumable ingestion",
    "expected": "IngestionJob with progress fields plus POST/GET endpoints for project-scoped ingestion jobs and cancel.",
    "observed": "IngestionJob model plus project-scoped ingestion job endpoints (create/list/cancel) implemented.",
    "status": "Correct",
    "impact": "Enables resumable ingestion jobs",
    "priority": "P2",
    "evidence_path": "backend/app/db/models.py",
    "evidence_lines": "422-470",
    "evidence_excerpt": "class IngestionJob(Base):\n    __tablename__ = \"ingestion_jobs\"\n\n    id: Mapped[int] = mapped_column(Integer, primary_key=True, index=True)\n    project_id: Mapped[int] = mapped_column(\n        Integer, ForeignKey(\"projects.id\"), index=True\n    )\n    kind: Mapped[str] = mapped_column(String(32))\n    source: Mapped[str] = mapped_column(Text)\n    status: Mapped[str] = mapped_column(String(32), default=\"pending\", index=True)\n    total_items: Mapped[int] = mapped_column(Integer, default=0)\n    processed_items: Mapped[int] = mapped_column(Integer, default=0)\n    error_message: Mapped[Optional[str]] = mapped_column(Text, nullable=True)\n    meta: Mapped[Optional[dict]] = mapped_column(JSON, nullable=True)\n    cancel_requested: Mapped[bool] = mapped_column(Boolean, default=False)\n    total_bytes: Mapped[int] = mapped_column(Integer, default=0)\n    processed_bytes: Mapped[int] = mapped_column(Integer, default=0)\n    started_at: Mapped[Optional[datetime]] = mapped_column(DateTime, nullable=True)\n    finished_at: Mapped[Optional[datetime]] = mapped_column(DateTime, nullable=True)\n    created_at: Mapped[datetime] = mapped_column(",
    "followup": ""
  },
  {
    "id": "PT.INGEST.MODEL.002",
    "phase": "PT",
    "area": "INGEST",
    "type": "model",
    "plan_source": "Updated_Project_Plan_2_Ingestion_Plan.txt::T2.2 Hash-based incremental ingestion",
    "expected": "file_ingestion_state table tracking sha256 per project/path for incremental re-ingestion.",
    "observed": "file_ingestion_state table exists with project/path unique constraint and sha256 tracking.",
    "status": "Correct",
    "impact": "Supports incremental ingestion",
    "priority": "P2",
    "evidence_path": "backend/app/db/models.py",
    "evidence_lines": "451-470",
    "evidence_excerpt": "class FileIngestionState(Base):\n    __tablename__ = \"file_ingestion_state\"\n    __table_args__ = (\n        UniqueConstraint(\n            \"project_id\",\n            \"relative_path\",\n            name=\"uq_file_ingestion_state_project_path\",\n        ),\n    )\n\n    id: Mapped[int] = mapped_column(Integer, primary_key=True, index=True)\n    project_id: Mapped[int] = mapped_column(\n        Integer, ForeignKey(\"projects.id\"), index=True\n    )\n    relative_path: Mapped[str] = mapped_column(String(512))\n    sha256: Mapped[str] = mapped_column(String(64))\n    last_ingested_at: Mapped[datetime] = mapped_column(\n        DateTime, default=datetime.utcnow, onupdate=datetime.utcnow\n    )\n",
    "followup": ""
  },
  {
    "id": "PT.INGEST.MODEL.003",
    "phase": "PT",
    "area": "INGEST",
    "type": "model",
    "plan_source": "Updated_Project_Plan_2_Ingestion_Plan.txt::T3.1 BlueprintSection summaries",
    "expected": "BlueprintSectionSummary per PlanNode with short_summary and detailed_summary updated during plan generation.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "PT.INGEST.API.001",
    "phase": "PT",
    "area": "INGEST",
    "type": "endpoint",
    "plan_source": "Updated_Project_Plan_2_Ingestion_Plan.txt::T4.2 Code workers: windowed file reads",
    "expected": "Filesystem read endpoint supports start_line/end_line to allow windowed reads for workers.",
    "observed": "read_project_file exists but only returns full file; no start_line/end_line windowing support.",
    "status": "Misaligned",
    "impact": "Token usage risk for workers",
    "priority": "P1",
    "evidence_path": "backend/app/api/main.py",
    "evidence_lines": "3313-3351",
    "evidence_excerpt": "@app.get(\"/projects/{project_id}/fs/read\")\ndef read_project_file(\n    project_id: int,\n    file_path: Optional[str] = None,\n    subpath: Optional[str] = None,\n    db: Session = Depends(get_db),\n):\n    \"\"\"\n    Read a text file under the project's local_root_path.\n    \"\"\"\n    project = _ensure_project(db, project_id)\n    root = _get_project_root(project)\n    effective_path = file_path or subpath\n    if not effective_path:\n        raise HTTPException(\n            status_code=422,\n            detail=\"file_path (or subpath) is required.\",\n        )\n\n    target = _safe_join(root, effective_path)",
    "followup": "Implement per updated plan"
  },
  {
    "id": "PT.INGEST.BUDGET.001",
    "phase": "PT",
    "area": "INGEST",
    "type": "env",
    "plan_source": "Updated_Project_Plan_2_Ingestion_Plan.txt::T5.1 Budget knobs in config",
    "expected": "CONFIG_ENV and backend honor MAX_EMBED_TOKENS_PER_BATCH, MAX_EMBED_ITEMS_PER_BATCH, MAX_CONTEXT_TOKENS_PER_CALL, AUTOPILOT_MAX_TOKENS_PER_RUN.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "PM.MATRIX.ROLE.001",
    "phase": "PM",
    "area": "MATRIX",
    "type": "env",
    "plan_source": "Updated_Project_Plan_2_Model_Matrix.txt::1.1 Core env vars & 1.2 defaults",
    "expected": "Env vars OPENAI_MODEL_SUMMARY/SNAPSHOT/BLUEPRINT/PLAN_TASKS/MANAGER/WORKER_CODE/WORKER_TEST/WORKER_DOC/ALIGNMENT/INTENT/RESEARCH_DEEP defined.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "PM.MATRIX.ROLE.002",
    "phase": "PM",
    "area": "MATRIX",
    "type": "service",
    "plan_source": "Updated_Project_Plan_2_Model_Matrix.txt::4.1 Role \u2192 env \u2192 model resolution",
    "expected": "openai_client implements _ROLE_ENV_VARS/_ROLE_DEFAULT_MODELS and get_model_for_role(role).",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "PM.MATRIX.ROLE.003",
    "phase": "PM",
    "area": "MATRIX",
    "type": "service",
    "plan_source": "Updated_Project_Plan_2_Model_Matrix.txt::4.2 Calling helper & 3.x subsystem wiring",
    "expected": "Subsystems call call_model_for_role for manager/workers/blueprint/plan_tasks/summary/snapshot/alignment/intent.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "PM.MATRIX.EMBED.001",
    "phase": "PM",
    "area": "MATRIX",
    "type": "env",
    "plan_source": "Updated_Project_Plan_2_Model_Matrix.txt::5.1 Embedding model",
    "expected": "get_embedding_model uses OPENAI_EMBEDDING_MODEL default text-embedding-3-small across ingestion/search/memory/blueprints.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "PS.SAFETY.FS.001",
    "phase": "PS",
    "area": "SAFETY",
    "type": "safety",
    "plan_source": "Updated_Project_Plan_2_AUTOPILOT_LIMITATIONS.txt::3.1 Filesystem safety",
    "expected": "All file ops normalized and confined to project local_root_path (no path escape).",
    "observed": "Filesystem helpers use _safe_join to confine paths under project local_root_path and enforce relative paths.",
    "status": "Correct",
    "impact": "Safety control in place",
    "priority": "P2",
    "evidence_path": "backend/app/api/main.py",
    "evidence_lines": "685-706",
    "evidence_excerpt": "def _safe_join(root: Path, relative_path: str) -> Path:\n    \"\"\"\n    Resolve a subpath/file_path safely under root, preventing path traversal.\n\n    Rules:\n    - 'relative_path' must be relative (no drive, no leading slash).\n    - It may not contain '..' segments.\n    - Final resolved path must still live under 'root'.\n    \"\"\"\n    if not relative_path:\n        return root\n\n    rel_obj = Path(relative_path)\n\n    # Disallow absolute paths like \"C:\\\\Windows\" or \"/etc\"\n    if rel_obj.is_absolute():\n        raise HTTPException(\n            status_code=400,\n            detail=\"Path must be relative to the project local_root_path.\",\n        )",
    "followup": ""
  },
  {
    "id": "PS.SAFETY.TERM.001",
    "phase": "PS",
    "area": "SAFETY",
    "type": "safety",
    "plan_source": "Updated_Project_Plan_2_AUTOPILOT_LIMITATIONS.txt::3.2 Terminal safety",
    "expected": "Terminal commands auto-run only from safe prefixes; forbidden substrings rm/del/git push/format/shutdown/reboot etc.",
    "observed": "run_terminal endpoints execute arbitrary commands with subprocess.run and no allowlist/forbidden checks.",
    "status": "Misaligned",
    "impact": "Safety gap for terminal execution",
    "priority": "P0",
    "evidence_path": "backend/app/api/main.py",
    "evidence_lines": "3753-3838",
    "evidence_excerpt": "@app.post(\"/terminal/run\")\ndef run_terminal_command(\n    payload: TerminalRunPayload,\n    db: Session = Depends(get_db),\n):\n    \"\"\"\n    Run a shell command for a given project, safely constrained under\n    that project's local_root_path.\n\n    Body:\n    {\n      \"project_id\": 1,\n      \"cwd\": \"backend\",       # optional, relative to project root\n      \"command\": \"git status\",\n      \"timeout_seconds\": 60\n    }\n    \"\"\"\n    if payload.project_id is None:\n        raise HTTPException(status_code=422, detail=\"project_id is required (path or body).\")\n",
    "followup": "Implement per updated plan"
  },
  {
    "id": "PS.SAFETY.APPROVAL.001",
    "phase": "PS",
    "area": "SAFETY",
    "type": "safety",
    "plan_source": "Updated_Project_Plan_2_AUTOPILOT_LIMITATIONS.txt::3.3 Approval gates",
    "expected": "Suggest: everything needs approval; Semi: safe reads/tests auto, writes/unsafe commands need approval; Full: auto except forbidden commands; rollback available.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "PD.DOCS.001",
    "phase": "PD",
    "area": "DOCS",
    "type": "docs",
    "plan_source": "Updated_Project_Plan_2.txt::5.2 Docs to update",
    "expected": "SYSTEM_OVERVIEW, SYSTEM_MATRIX, API_REFERENCE, USER_MANUAL, DEV_GUIDE, AGENT_GUIDE, OPERATIONS_RUNBOOK, TEST_PLAN updated for blueprint/runs/autopilot.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  },
  {
    "id": "PD.QA.001",
    "phase": "PD",
    "area": "QA",
    "type": "tests",
    "plan_source": "Updated_Project_Plan_2.txt::5.3 QA & smoke tests",
    "expected": "qa/blueprints_probe.py, qa/runs_autopilot_probe.py and smoke coverage added; TEST_PLAN scenarios H-Blueprint-01, H-Autopilot-01/02.",
    "observed": "Not found in repo; no evidence of implementation.",
    "status": "To-do",
    "impact": "Blocking related phase",
    "priority": "P1",
    "evidence_path": "",
    "evidence_lines": "",
    "evidence_excerpt": "",
    "followup": "Implement per updated plan"
  }
]